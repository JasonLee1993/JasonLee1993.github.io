<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>jason</title>
<style>
*{
	margin:0;
	padding:0;
}

div{
	width:200px;
	height:200px;
	background:red;
	opacity:0.3;
	margin:20px;
	filter:alpha(opacity:30);
}
</style>
<link rel="stylesheet" type="text/css" href="index.css" />
<script>
 window.onload = function(){
 var odiv = document.getElementsByTagName('div');
 for(var i = 0; i<odiv.length; i++){
	 odiv[i].timer = null;
	 odiv[i].alpha = 30;
 odiv[i].onmouseover = function(){
	 startMove(this, 'opacity', 100);
 }
 odiv[i].onmouseout = function(){
	 startMove(this, 'opacity', 30);
 }
 }
 }
 //var timer = null;
 //var alpha = 30;
 
function startMove(obj, attr, target){
	  clearInterval(obj.timer);
	  obj.timer = setInterval(function(){
		  //1. 取当前值
		  var icur = 0;
		  if(attr == 'opacity')
		    icur = Math.round(parseFloat(getStyle(obj,attr))*100);
		  else
		    icur = parseInt(getStyle(obj,attr));
		  //2. 算速度speed
		  var speed = (target - icur)/8;
		  speed = speed>0?Math.ceil(speed):Math.floor(speed);
		  //3. 检测停止
		  if(icur == target)
		  clearInterval(obj.timer);
		  //4. 变化
		  else{
			  if(attr == 'opacity'){
				  obj.style['filter'] = 'alpha(opacity:'+(icur+speed)+')';
				  obj.style['opacity'] = (icur + speed)/100;
			  }
			  else
		          obj.style[attr] = icur + speed + 'px';
		  }
	  },30);
	  
  }
 
 function getStyle(obj,attr){
	if (obj.currentStyle)
	  return obj.currentStyle[attr];
	else 
      return getComputedStyle(obj,false)[attr];
}
 
 
 </script>
</head>
<body>
<div id = "div1"></div>
<div id = "div2"><a href="抽奖.html">抽奖</div>
<div id = "div3"></div>
<div id = "div4"></div>
</body>
</html>
